
<!-- <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script> -->
<script>
  hydrateSoundclouds({ clientId: '{{ options.clientId }}', url: '{{ item.url }}', display_type: '{{ options.display_type }}' })
</script>

{% if options.display_type == "waveform" %}
  <div class="apos-soundcloud-container">

	
	<div class="sc-logo"><a target="_blank" href="http://soundcloud.com"><img src="/modules/soundcloud/images/soundcloud.png"></a></div>
	<div class="playpause-button"><i id="playpause" class="icon-play"></i></div>

<!-- 	<div class="download-button"><a target="_blank" href="http://soundcloud.com"><img src="/modules/soundcloud/images/download.png"></a></div> -->
	{% if options.trackUrl and options.trackUrl.length %}

	<div class="download-track-button wv-download-btn" data-item-id="{{options.itemId}}" data-item-title="{{options.title}}" data-episode><i class="icon-download"></i></div>

	{% endif %}
	
	<div id='waveform'>
		<div class="play-text">Click to Play</div>
	</div>
	</div>

	{% if options.trackUrl and options.trackUrl.length %}



	{# DOWNLOAD + EMAIL CAPTURE SCRIPT #}
	{# * marup on episode page #}
	<script>
	$(function(){

		var $downloadBtn = $('.wv-download-btn'),
			$modal = $('.wv-download-modal'),
			$modalTitle = $('.download-modal-title'),
			$bg = $('.wv-download-modal-bg'),
			$close = $('.wv-close-modal'),
			$email = $('.download-email'),
			$submit = $('.download-submit'),
			$bucket = $('.download-modal-email'),
			$loader = $('.download-loader'),
			$success = $('.wv-success'),
			$failure = $('.wv-failure'),
			origin = $bucket.html(),
			url = location.origin + '/apos/wv-download',
			id, email;

		$downloadBtn.click(function(e){

			// Set title, ID
			var title = $(this).attr('data-item-title');
			id = $(this).attr('data-item-id');

			$modalTitle.html(title);

			$modal.addClass('show');
			$bg.addClass('show');
		});

		$close.click(function(e){
			$modal.removeClass('show');
			$bg.removeClass('show');
			setTimeout(function(){
				$failure.removeClass('show');
				$success.removeClass('show');
				$submit.attr('value', 'Submit');
			}, 300);
		});

		$submit.click(function(e){

			e.preventDefault();

			email = $email.val();
			$submit.attr('value', '');
			$loader.addClass('show');

			$.ajax({
				type: 'POST',
				url: url,
				data: {
					id: id,
					email: email,
					episode: true
				},
				success: function() {

					$success.addClass('show');
					$loader.removeClass('show');
				},
				error: function() {

					$failure.addClass('show');
					$loader.removeClass('show');
				}
			});
		});


		// URL param to open the modal on page load
		if (window.location.href.toLowerCase().indexOf('dl=1') > -1) {

			if ($downloadBtn.length == 1) {
				var title = $downloadBtn.attr('data-item-title');
				id = $downloadBtn.attr('data-item-id');
				$modalTitle.html(title);
				$modal.addClass('show');
				$bg.addClass('show');
			}
		}
	});
	</script>
	{% endif %}



{%  elif options.display_type == "360" %}

	<div class="ui360">
	 <a id="track" type="audio/mp3" href="">play</a>
	</div>


{% elif options.display_type == "Soundcloud-embed" %}
	
	<div class="apos-soundcloud-container"></div>

{% endif %}

<div class="apos-soundcloud-container" data-url="{{ item.url }}">
</div>

